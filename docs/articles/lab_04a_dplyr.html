<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lab 04a: Exploring data with `dplyr`  • ENVS475</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Lab 04a: Exploring data with `dplyr` ">
<meta property="og:description" content="ENVS475">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ENVS475</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2024.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/syllabus.html">
    <span class="fa fa-book"></span>
     
    Syllabus
  </a>
</li>
<li>
  <a href="../articles/schedule.html">
    <span class="fa fa-calendar"></span>
     
    Schedule
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-desktop"></span>
     
    Lectures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/lectures/lecture_01/lecture_01.html">Lecture 01: Course introduction</a>
    </li>
    <li>
      <a href="../articles/lectures/lecture_03_basic-stats/lecture_03_basic-stats.html">Lecture 03: Basic Statistics</a>
    </li>
    <li>
      <a href="../articles/lectures/lecture_05_estimation/lecture_05_estimation.html">Lecture 05: Point Estimates</a>
    </li>
    <li>
      <a href="../articles/lectures/lecture_06_intro-models/lecture_06_intro-models.html">Lecture 06: Intro to Models</a>
    </li>
    <li>
      <a href="../articles/lectures/lecture_07_t-tests/lecture_07_t-tests.html">Lecture 07: t-tests</a>
    </li>
    <li>
      <a href="../articles/lectures/lecture_10_anova/lecture_10_anova.html">Lecture 10: ANOVA</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-laptop-code"></span>
     
    Labs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/lab_01_projects.html">lab 01: projects</a>
    </li>
    <li>
      <a href="../articles/lab_02_intro_to_R.html">lab 02: Intro to R</a>
    </li>
    <li>
      <a href="../articles/lab_03_normal-distributions.html">lab 03: Normal Distributions</a>
    </li>
    <li>
      <a href="../articles/lab_04a_dplyr.html">lab 04a: dplyr</a>
    </li>
    <li>
      <a href="../articles/lab_04b_ggplot.html">lab 04b: ggplot</a>
    </li>
    <li>
      <a href="../articles/lab_05_point-estimates.html">lab 05: point estimates</a>
    </li>
    <li>
      <a href="../articles/lab_06_linear-models.html">lab 06: linear models</a>
    </li>
    <li>
      <a href="../articles/lab_08_t-tests.html">lab 07: t-tests</a>
    </li>
    <li>
      <a href="../articles/lab_07_intro_markdown.html">lab 09: intro to R markdown</a>
    </li>
    <li>
      <a href="../articles/lab_10_anova.html">lab 10: ANOVA</a>
    </li>
    <li>
      <a href="../articles/lab_11_factorial-anova.html">lab 11: Factorial ANOVA</a>
    </li>
    <li>
      <a href="../articles/lab_12_2-way-anova.html">lab 12: 2-way anova</a>
    </li>
    <li>
      <a href="../articles/lab_13_linear-regression.html">lab 13: Linear Regression</a>
    </li>
    <li>
      <a href="../articles/lab_14_ANCOVA.html">lab 14: ANCOVA</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-folder-open"></span>
     
    Homework
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/homework/HW_01.html">Homework 01 setup</a>
    </li>
    <li>
      <a href="../articles/homework/HW_02_intro_R.html">Homework 02 Intro to R</a>
    </li>
    <li>
      <a href="../articles/homework/HW_03_normal-distributions.html">Homework 03 Normal Distributions</a>
    </li>
    <li>
      <a href="../articles/homework/HW_04_dplyr_ggplot.html">Homework 04 dplyr + ggplot2</a>
    </li>
    <li>
      <a href="../articles/homework/HW_05_point-estimates.html">Homework 05 Point Estimates</a>
    </li>
    <li>
      <a href="../articles/homework/HW_06_linear_models.html">Homework 06 Intro to Linear Models</a>
    </li>
    <li>
      <a href="../articles/homework/HW_07_t-tests.html">Homework 07 t-tests</a>
    </li>
    <li>
      <a href="../articles/homework/HW_09_markdown.html">Homework 09 R Markdown</a>
    </li>
    <li>
      <a href="../articles/homework/HW_10_ANOVA.html">Homework 10 ANOVA</a>
    </li>
    <li>
      <a href="../articles/homework/HW_11_factorial.html">Homework 11 Factorial ANOVA</a>
    </li>
    <li>
      <a href="../articles/homework/HW_12_two-way-ANOVA.html">Homework 12 2-way ANOVA</a>
    </li>
    <li>
      <a href="../articles/homework/HW_13_linear-regression.html">Homework 13 Linear Regression</a>
    </li>
    <li>
      <a href="../articles/homework/HW_14_ANCOVA.html">Homework 14 ANCOVA</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-pencil-square-o"></span>
     
    References
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/term-list.html">Terms and Definitions</a>
    </li>
  </ul>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Lab 04a: Exploring data with
<code>dplyr</code>
</h1>
            <h3 data-toc-skip class="subtitle">ENVS475: Experimental
Analysis and Design</h3>
            
            <h4 data-toc-skip class="date">April, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Jpomz/ENVS475/blob/HEAD/vignettes/articles/lab_04a_dplyr.Rmd" class="external-link"><code>vignettes/articles/lab_04a_dplyr.Rmd</code></a></small>
      <div class="hidden name"><code>lab_04a_dplyr.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This tutorial is aimed at giving you an introduction to the popular
<code>dplyr</code> package. <code>dplyr</code> provides a few simple
verbs that allow you to quickly and easily select and manipulate your
data, and create an interactive environment for data exploration. This
tutorial is based on Chapter 5 in <a href="http://r4ds.had.co.nz" class="external-link">“<em>R
for Data Science</em>”</a> by Hadley Wickham &amp; Garrett Grolemund
which is vailable for free online. Material was also adapted from the
dplyr introduction vignette which you can find by running the following
command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre></div>
<p><code>dplyr</code> is part of the suite of packages known as
<code>tidyverse</code>. The packages within the tidyverse were designed
with a similar data and programming philosophy, and work together
fluidly. Hadley Wickham is the lead developer of the tidyverse, and his
book above takes a tidyverse-centric view, and is a fantastic resource
if you want to learn more. We will be using the <code>tidyverse</code>
packages throughout this course.</p>
<div class="section level3">
<h3 id="preliminaries">Preliminaries<a class="anchor" aria-label="anchor" href="#preliminaries"></a>
</h3>
<p>Before we begin, make sure you have the <code>tidyverse</code>
installed.</p>
<p>If you need to install it, run the following lines of code, as
needed. Also note that the package name is inside of “” in the function
call:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code></pre></div>
<p>As a reminder, you only have to run the
<code>install.packages(...)</code> line once per machine. Running this
line downloads the package onto the machine that you are currently
using. However, you do need to load the packages at the beginning of
every session. The following commands “loads” the packages and makes the
commands available to you. Note that once the package is installed, you
<em>do not</em> need “” around the package name.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-starwars">Data: <code>starwars</code><a class="anchor" aria-label="anchor" href="#data-starwars"></a>
</h3>
<p>In order to demonstrate the basic data manipulation verbs of dplyr,
we will be using the <code>starwars</code> database, which comes with
<code>dplyr</code> (part of the tidyverse.</p>
<p>We will load the <code>starwars</code> data by running the following
command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"starwars"</span><span class="op">)</span></span></code></pre></div>
<p>Whenever you start working with a new dataset, you should also run
some quick commands to get an idea of what the data looks like, and how
it is set up. I generally run the following commands (note that I have
suppressed the display in this document for room, but you should run
each of these on your computer):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code> list the number of rows and columns, in that
order. The <code>starwars</code> dataset has 87 rows and 87 columns.</p>
<p>You may notice that the <code>head(starwars)</code> output is
different from many other data frames that you may have worked with
before. It only shows the rows and columns that easily fit into your
window. That’s because the <code>starwars</code> object is a tibble:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></span></code></pre></div>
<p>Tibbles <code>"tbl_df"</code> act just as a data frame would, but
they print only the information that can fit into your window. To see
the full data frame in the Rstudio viewer use:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span></code></pre></div>
<p>Or as a normal data frame use:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To convert a data frame to a tibble, use
<code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code>.</p>
<p>As a general rule, I almost always use the <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code>
function when I’m looking at a new data set. This helps me get an idea
of the data structure, and if the variable names are meaningful, can
help me understand what types of questions I can ask, and how I may be
able to answer them.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "name"       "height"     "mass"       "hair_color" "skin_color"</span></span>
<span><span class="co">#&gt;  [6] "eye_color"  "birth_year" "sex"        "gender"     "homeworld" </span></span>
<span><span class="co">#&gt; [11] "species"    "films"      "vehicles"   "starships"</span></span></code></pre></div>
<p>These variables should be relatively self-explanatory, but you can
run <code><a href="https://dplyr.tidyverse.org/reference/starwars.html" class="external-link">?starwars</a></code> for more information, including units.</p>
</div>
</div>
<div class="section level2">
<h2 id="dplyr">
<code>dplyr</code><a class="anchor" aria-label="anchor" href="#dplyr"></a>
</h2>
<p>Data manipulation is one of the primary tasks that scientists
undertake. the <code>dplyr</code> package makes it easy to select the
data you want, organize it in a useful way, calculate useful new
variables, and summarize data by groups.</p>
<p>There is an extremely helpful Rstudio data wrangling cheat sheet
which you can download directly through Rstudio by clicking <em>Help
&gt; Cheatsheets &gt; Data transformation with dplyr</em>.</p>
<p><strong>Practice good project organization</strong> When you download
these cheat sheets, put them all in an appropriate folder so you can
find them again easily. Recall that I recommend the following sub
folders in your <code>ENVS_475</code> project directory:</p>
<pre><code>ENVS_475/
  |─── other_resources/
        |─── cheatsheets/
              |─── data-transformation.pdf</code></pre>
<p>I almost always have this cheat sheet open while I’m conducting any
analyses. It takes a little effort to learn how to “read” the cheat
sheet, but it’s well worth the effort.</p>
<div class="section level3">
<h3 id="single-table-verbs">Single table verbs<a class="anchor" aria-label="anchor" href="#single-table-verbs"></a>
</h3>
<p>dplyr aims to provide a function for each basic verb of data
manipulation:</p>
<ul>
<li>
<p>Pick observations based on their values:
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code></p>
<ul>
<li>many rows to fewer rows<br>
</li>
</ul>
</li>
<li><p>Reorder the rows: <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code></p></li>
<li>
<p>Pick variables based on their names: <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code></p>
<ul>
<li>many columns to fewer columns</li>
</ul>
</li>
<li><p>Add new variables (columns) based on existing variables:
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code></p></li>
<li>
<p>Reduce many observations to a single summary:
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code></p>
<ul>
<li>many rows to one</li>
</ul>
</li>
<li><p>Combine <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> to
get one row per group</p></li>
</ul>
<p>All verbs work similarly and have similar syntaxes:</p>
<ol style="list-style-type: decimal">
<li>The first argument is a data frame.</li>
<li>Following arguments specify what to do with the data frame using
un-quoted variable names.</li>
<li>Result is new data frame.</li>
</ol>
<p>There are other verbs in the <code>dplyr</code> package, along with
many useful “helper” functions. Browse the vignettes for dplyr:
<code>browseVignettes(package = "dplyr")</code>, or check the Rstudio
data wrangling cheat sheet which you downloaded at the beginning of this
tutorial.</p>
<div class="section level4">
<h4 id="filter-rows-with-filter">Filter rows with <code>filter()</code><a class="anchor" aria-label="anchor" href="#filter-rows-with-filter"></a>
</h4>
<div class="section level6">
<h6 id="many-rows-to-fewer-rows">Many rows to fewer rows<a class="anchor" aria-label="anchor" href="#many-rows-to-fewer-rows"></a>
</h6>
<p><code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> allows you to select a subset of rows in a data
frame. The first argument is the name of the data frame. The second and
subsequent arguments are the expressions that filter the data frame.</p>
</div>
<div class="section level5">
<h5 id="filter-rows-based-on-numeric-data">Filter rows based on numeric data<a class="anchor" aria-label="anchor" href="#filter-rows-based-on-numeric-data"></a>
</h5>
<p>For example, we can select all star wars characters who are greater
than or equal to 180 cm tall with:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">height</span> <span class="op">&gt;=</span> <span class="fl">180</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 44 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Darth Va…    202   136 none       white      yellow          41.9 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Biggs Da…    183    84 black      light      brown           24   male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Obi-Wan …    182    77 auburn, w… fair       blue-gray       57   male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Anakin S…    188    84 blond      fair       blue            41.9 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 40 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
<ul>
<li><p>Note that R tells us that the functioned returned “A tibble: rows
x columns”.</p></li>
<li><p>This makes sense, because we are only asking for star wars
characters taller than a number.</p></li>
<li><p>It’s always a good idea to double check that the size of the
returned data makes sense.</p></li>
</ul>
</div>
<div class="section level5">
<h5 id="the-use-of">The use of <code>==</code><a class="anchor" aria-label="anchor" href="#the-use-of"></a>
</h5>
<p>if we wanted to know which characters were <em>exactly</em> 180 cm,
we use the following:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">height</span> <span class="op">==</span> <span class="fl">180</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Wilhuff …    180    <span style="color: #BB0000;">NA</span> auburn, g… fair       blue              64 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Han Solo     180    80 brown      fair       brown             29 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Jek Tono…    180   110 brown      fair       blue              <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Ackbar       180    83 none       brown mot… orange            41 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more row</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
<p>In the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> command, we use <code>==</code> instead
of <code>=</code>. The <code>==</code> is a Boolean operator. It is used
to specify that we want to know if the object on the left is
<em>exactly</em> the same as the object on the right. For example, run
the following code:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">5</span> <span class="op">==</span> <span class="fl">5</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fl">5</span> <span class="op">==</span> <span class="fl">9</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="st">"A"</span><span class="op">==</span><span class="st">"a"</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="st">"a"</span> <span class="op">==</span> <span class="st">"a"</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>The single <code>=</code> is another way of <em>assigning</em> a
value to an object in R. For example <code>a = 5</code> stores the value
of 5 inside of the object called <code>a</code>.</p>
</div>
<div class="section level5">
<h5 id="filtering-rows-based-on-character-data">Filtering rows based on character data<a class="anchor" aria-label="anchor" href="#filtering-rows-based-on-character-data"></a>
</h5>
<p>In the example above, we were filtering observations based on numeric
data (i.e., <code>height &gt;= 150</code>). Filter also works with
character data types. For example, let’s extract all of the star wars
characters that are from Naboo, which is stored in the
<code>homeworld</code> column</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span> <span class="op">==</span> <span class="st">"Naboo"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> R2-D2         96    32 <span style="color: #BB0000;">NA</span>         white, bl… red               33 none  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Palpatine    170    75 grey       pale       yellow            82 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Padmé Am…    185    45 brown      light      brown             46 fema… femin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Jar Jar …    196    66 none       orange     orange            52 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
<p>Note the use of <code>""</code> around UA in the
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> function. Remove the quotes and run the code
again. What happens?</p>
<p>You should have received an error code in the R console. Error codes
often look like hieroglyphics the first few times you see them, but the
important information in this error is the “object ‘UA’ not found”. When
we enter unquoted arguments into the dplyr functions, R looks for
objects (i.e., data objects, column names within a data object, etc.)
with that name.</p>
</div>
<div class="section level5">
<h5 id="other-boolean-operators">Other Boolean operators<a class="anchor" aria-label="anchor" href="#other-boolean-operators"></a>
</h5>
<p>Other Boolean operators include: * <code>|</code> which means
“or”</p>
<ul>
<li><p><code>&amp;</code> which means “and”</p></li>
<li><p><code>!=</code> which means “not equal to” <strong>PAY ATTENTION
HERE!</strong></p></li>
<li><p><code>&gt;=</code>which means “greater than or equal to”</p></li>
<li><p><code>&lt;=</code>which means “less than or equal to”</p></li>
<li><p><code>&gt;</code>which means “greater than”</p></li>
<li><p><code>&lt;</code>which means “less than”</p></li>
</ul>
<p>You can use boolean operators, singly and in combination:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># starwars from Tatooine *OR* Alderaan</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span> <span class="op">==</span> <span class="st">"Tatooine"</span> <span class="op">|</span> <span class="va">homeworld</span> <span class="op">==</span> <span class="st">"Alderaan"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># starwars from Tatooine OR Alderaan AND that are &gt; 100 OR &lt; 150 cm</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span> <span class="op">==</span> <span class="st">"Tatooine"</span> <span class="op">|</span> <span class="va">homeworld</span> <span class="op">==</span> <span class="st">"Alderaan"</span> <span class="op">&amp;</span> <span class="va">height</span> <span class="op">&gt;</span> <span class="fl">100</span> <span class="op">|</span> <span class="va">height</span> <span class="op">&lt;</span> <span class="fl">150</span><span class="op">)</span></span></code></pre></div>
<p>Sometimes you want to see all of the data that do <em>not</em> meet a
criteria. For example, maybe you don’t want to know what starwars
characters are not from Tatooine. You can use the logical negation
command <code>!=</code>. This command can be read as “not equal to”.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not Tatooine</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span> <span class="op">!=</span> <span class="st">"Tatooine"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 67 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> R2-D2         96    32 <span style="color: #BB0000;">NA</span>         white, bl… red               33 none  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Leia Org…    150    49 brown      light      brown             19 fema… femin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Obi-Wan …    182    77 auburn, w… fair       blue-gray         57 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Wilhuff …    180    <span style="color: #BB0000;">NA</span> auburn, g… fair       blue              64 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 63 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="removing-nas-with-filter">Removing <code>NA</code>’s with <code>filter()</code><a class="anchor" aria-label="anchor" href="#removing-nas-with-filter"></a>
</h5>
<p>A common task in data analysis requires the removal of
<code>NA</code> values in our data. For example, in the
<code>starwars</code> data, droids don’t have hair, so
<code>hair_color</code> is <code>NA</code>.</p>
<p>Based on what we learned before it’s natural to think that we do this
by using the condition <code>hair_color != NA</code> * To remove only
rows with <code>NA</code> in specific columns use
<code>filter</code></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">hair_color</span> <span class="op">!=</span> <span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Why didn’t that work?</li>
<li>Null values like <code>NA</code> are special</li>
<li>We don’t want to accidentally say that two “missing” things are the
same
<ul>
<li>We don’t know if they are</li>
</ul>
</li>
<li>So use special commands</li>
<li>
<code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> checks if the value is <code>NA</code>
</li>
<li>Combine this with <code>!</code> for “not”</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">hair_color</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 82 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Luke Sky…    172    77 blond      fair       blue            19   male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Darth Va…    202   136 none       white      yellow          41.9 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Leia Org…    150    49 brown      light      brown           19   fema… femin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Owen Lars    178   120 brown, gr… light      blue            52   male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 78 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="using-unique">Using <code>unique()</code><a class="anchor" aria-label="anchor" href="#using-unique"></a>
</h5>
<p>It is also often useful to see all of the values that occur within a
variable column. For example, what are all of the homeworld origins in
this data set?</p>
<p>Here, I will use the base R function <code><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique()</a></code> to see all
of the values in the variable <code>homeworld</code>. To select just
that variable, I will use the <code>$</code> subsetting function.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">$</span><span class="va">homeworld</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Tatooine"       "Naboo"          "Alderaan"       "Stewjon"       </span></span>
<span><span class="co">#&gt;  [5] "Eriadu"         "Kashyyyk"       "Corellia"       "Rodia"         </span></span>
<span><span class="co">#&gt;  [9] "Nal Hutta"      "Bestine IV"     NA               "Kamino"        </span></span>
<span><span class="co">#&gt; [13] "Trandosha"      "Socorro"        "Bespin"         "Mon Cala"      </span></span>
<span><span class="co">#&gt; [17] "Chandrila"      "Endor"          "Sullust"        "Cato Neimoidia"</span></span>
<span><span class="co">#&gt; [21] "Coruscant"      "Toydaria"       "Malastare"      "Dathomir"      </span></span>
<span><span class="co">#&gt; [25] "Ryloth"         "Aleen Minor"    "Vulpter"        "Troiken"       </span></span>
<span><span class="co">#&gt; [29] "Tund"           "Haruun Kal"     "Cerea"          "Glee Anselm"   </span></span>
<span><span class="co">#&gt; [33] "Iridonia"       "Iktotch"        "Quermia"        "Dorin"         </span></span>
<span><span class="co">#&gt; [37] "Champala"       "Geonosis"       "Mirial"         "Serenno"       </span></span>
<span><span class="co">#&gt; [41] "Concord Dawn"   "Zolan"          "Ojom"           "Skako"         </span></span>
<span><span class="co">#&gt; [45] "Muunilinst"     "Shili"          "Kalee"          "Umbara"        </span></span>
<span><span class="co">#&gt; [49] "Utapau"</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="arrange-rows-with-arrange">Arrange rows with <code>arrange()</code><a class="anchor" aria-label="anchor" href="#arrange-rows-with-arrange"></a>
</h4>
<div class="section level6">
<h6 id="change-order-of-rows-based-on-values-in-a-column">Change order of rows based on values in a column<a class="anchor" aria-label="anchor" href="#change-order-of-rows-based-on-values-in-a-column"></a>
</h6>
<p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> has a similar syntax as <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>
but instead of selecting rows, it reorders them. It takes a data frame
as the first argument, and then column name(s) to order by as subsequent
arguments. The data will be arranged by the first column name provided,
with ties being broken by subsequent columns:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># arrange by homeworld</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Leia Org…    150    49 brown      light      brown             19 fema… femin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Bail Pre…    191    <span style="color: #BB0000;">NA</span> black      tan        brown             67 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Raymus A…    188    79 brown      light      brown             <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Ratts Ty…     79    15 none       grey, blue unknown           <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span>
<span></span>
<span><span class="co"># arrange by homeworld, then height</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span>, <span class="va">height</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Leia Org…    150    49 brown      light      brown             19 fema… femin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Raymus A…    188    79 brown      light      brown             <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Bail Pre…    191    <span style="color: #BB0000;">NA</span> black      tan        brown             67 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Ratts Ty…     79    15 none       grey, blue unknown           <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
<p>The default order is from smallest to largest, numeric to character,
and a to z. To reverse this order, use <code><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc()</a></code> to order a
column in descending order:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">homeworld</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Zam Wese…    168    55 blonde     fair, gre… yellow            <span style="color: #BB0000;">NA</span> fema… femin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Dud Bolt      94    45 none       blue, grey yellow            <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Tion Med…    206    80 none       grey       black             <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Sly Moore    178    48 none       pale       white             <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="select-columns-with-select">Select columns with <code>select()</code><a class="anchor" aria-label="anchor" href="#select-columns-with-select"></a>
</h4>
<div class="section level6">
<h6 id="many-columns-to-fewer-columns">Many columns to fewer columns<a class="anchor" aria-label="anchor" href="#many-columns-to-fewer-columns"></a>
</h6>
<p>Data sets generally contain numerous columns, but oftentimes you are
only interested in a few for a given analysis. <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>
allows you to focus on a useful subset of your data while dropping
un-needed columns. You can indicate which columns you want by naming
them (without quotes) or select which columns you <em>don’t</em> want by
putting a <code>-</code> in front of the name. I have suppressed the
output to save space in this document, but be sure to run the following
commands in your session and see what happens. Be sure to note the
number of rows and columns that each command returns.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select columns by name</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">height</span>, <span class="va">mass</span>, <span class="va">homeworld</span>, <span class="va">hair_color</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select all columns between name and eye_color (inclusive)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">name</span><span class="op">:</span><span class="va">eyecolor</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select all columns except for height</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="op">-</span><span class="va">height</span><span class="op">)</span></span></code></pre></div>
<p>There are a number of helper functions you can use within
<code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>, like <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>,
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code> and
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code>. These let you quickly match larger blocks of
variables that meet some criterion. See <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">?select</a></code> for more
details.</p>
<p>The order you write the arguments in <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> are
retained in the output. This can be helpful if you want to quickly
compare the values in two columns which do not normally appear next to
each other.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">name</span>, <span class="va">homeworld</span>, <span class="va">eye_color</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 3</span></span></span>
<span><span class="co">#&gt;   name           homeworld eye_color</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Luke Skywalker Tatooine  blue     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> C-3PO          Tatooine  yellow   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> R2-D2          Naboo     red      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Darth Vader    Tatooine  yellow   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="add-new-columns-with-mutate">Add new columns with <code>mutate()</code><a class="anchor" aria-label="anchor" href="#add-new-columns-with-mutate"></a>
</h4>
<div class="section level6">
<h6 id="many-columns-to-more-columns">Many columns to more columns<a class="anchor" aria-label="anchor" href="#many-columns-to-more-columns"></a>
</h6>
<p>Data analysis often requires the creation of new variable columns
based on values within your data. The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> function
allows you to do this. For example, let’s calculate a new variable
called <code>bmi</code>, which looks at how height and mass in one
variable.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make new column called "bmi"</span></span>
<span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">starwars</span>,</span>
<span>  bmi <span class="op">=</span> <span class="va">mass</span> <span class="op">/</span> <span class="va">height</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># select new columns in d2, and columns used to calculate them</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">d2</span>, <span class="va">mass</span>, <span class="va">height</span>, <span class="va">bmi</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 3</span></span></span>
<span><span class="co">#&gt;    mass height     bmi</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    77    172 0.002<span style="text-decoration: underline;">60</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>    75    167 0.002<span style="text-decoration: underline;">69</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>    32     96 0.003<span style="text-decoration: underline;">47</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>   136    202 0.003<span style="text-decoration: underline;">33</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="summarise-values-with-summarise">Summarise values with <code>summarise()</code><a class="anchor" aria-label="anchor" href="#summarise-values-with-summarise"></a>
</h4>
<div class="section level6">
<h6 id="many-rows-to-a-single-row">Many rows to a single row<a class="anchor" aria-label="anchor" href="#many-rows-to-a-single-row"></a>
</h6>
<p>The last verb is <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code>. This collapses a dataframe
to a single value, based on a function:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mean height</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">starwars</span>,</span>
<span>  height_average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   height_average</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>           175.</span></span>
<span><span class="co"># smallest mass</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">starwars</span>, min_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mass</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   min_mass</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       15</span></span></code></pre></div>
<p>Notice the argument <code>na.rm = TRUE</code> within the summarize
function. If you have missing or <code>NA</code> values within your
data, it will cause the summary functions to return <code>NA</code>.
Recall that we discussed this in the “<code>NULL</code>’s in Vectors”
section in our introduction to R activity.</p>
<p>Additionally, summarize is optimized to work with functions that
return a single value. For example, <code><a href="https://rdrr.io/r/base/range.html" class="external-link">range()</a></code> returns the
minimum and maximum value of a set of numbers:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">NA</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1 7</span></span></code></pre></div>
<p>When used in combination with <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code>, two values
are returned, but they are not labeled, and it includes a warning
message:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">starwars</span>,</span>
<span>          height_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in</span></span>
<span><span class="co">#&gt; dplyr 1.1.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `reframe()` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> When switching from `summarise()` to `reframe()`, remember that `reframe()`</span></span>
<span><span class="co">#&gt;   always returns an ungrouped data frame and adjust accordingly.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 1</span></span></span>
<span><span class="co">#&gt;   height_range</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>           66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>          264</span></span></code></pre></div>
<p>If this is the only thing you are calling, it may be easy to tell
which is which, but if we have multiple summary arguments, it can be
less obvious:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">starwars</span>,</span>
<span>          height_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>          height_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in</span></span>
<span><span class="co">#&gt; dplyr 1.1.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `reframe()` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> When switching from `summarise()` to `reframe()`, remember that `reframe()`</span></span>
<span><span class="co">#&gt;   always returns an ungrouped data frame and adjust accordingly.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   height_range height_mean</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>           66        175.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>          264        175.</span></span></code></pre></div>
<p>However, we can get around this by calling the <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code> and
<code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code> functions separately within summarise:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">starwars</span>, </span>
<span>          min_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>          max_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>          mean_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   min_height max_height mean_height</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         66        264        175.</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="grouped-operations">Grouped operations<a class="anchor" aria-label="anchor" href="#grouped-operations"></a>
</h3>
<div class="section level6">
<h6 id="many-rows-to-one-per-group">Many rows to one-per-group<a class="anchor" aria-label="anchor" href="#many-rows-to-one-per-group"></a>
</h6>
<p>These verbs are useful on their own, but when used in conjuction with
the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> function, the awesomeness of
<code>dplyr</code> starts to shine through. It organizes a dataset into
specified groups of rows. Verbs are then applied group-by-group within
the dataset. Conveniently, this is accomplished using the exact same
syntax as above.</p>
<p>Here, we will group the data by <code>homeworld</code> and then
summarize the mean height:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a new object which contains a "grouping variable"</span></span>
<span><span class="va">home_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span><span class="va">home_group</span>,</span>
<span>          mean_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 49 × 2</span></span></span>
<span><span class="co">#&gt;   homeworld   mean_height</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Alderaan           176.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Aleen Minor         79 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Bespin             175 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Bestine IV         180 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 45 more rows</span></span></span></code></pre></div>
<p>The output now contains 1 row per world</p>
<p>Notice that if we print out the <code>home_group</code> object that
it has the same dimensions as the original, but there is now a new line
at the top which specifies the grouping variable:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">home_group</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 14</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   homeworld [49]</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Luke Sky…    172    77 blond      fair       blue            19   male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> C-3PO        167    75 <span style="color: #BB0000;">NA</span>         gold       yellow         112   none  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> R2-D2         96    32 <span style="color: #BB0000;">NA</span>         white, bl… red             33   none  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Darth Va…    202   136 none       white      yellow          41.9 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="using-n-to-get-counts">Using <code>n()</code> to get counts<a class="anchor" aria-label="anchor" href="#using-n-to-get-counts"></a>
</h5>
<p>Another common data summarization task is to get the number of
observations within a data set. For example, let’s say we wanted to know
how many starwars each carrier was scheduled to operate. For this, we
can use <code><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n()</a></code>, which is a special function inside of the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span><span class="va">home_group</span>, count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 49 × 2</span></span></span>
<span><span class="co">#&gt;   homeworld   count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Alderaan        3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Aleen Minor     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Bespin          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Bestine IV      1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 45 more rows</span></span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="chaining">Chaining<a class="anchor" aria-label="anchor" href="#chaining"></a>
</h2>
<p>The <code>dplyr</code> function calls don’t have any side-effects
(unlike some base functions), making it easy to explore your data in an
interactive way. However, one disadvantage of this is it doesn’t lead to
very sucinct code, particularly if you want to perform many operations
at once. You can do it step-by-step, saving a new object each time:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate starwars characters that have a BMI either &gt;0.04 or &lt; 0.01 </span></span>
<span><span class="va">a1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span></span>
<span><span class="va">a2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">a1</span>, <span class="va">homeworld</span>, <span class="va">height</span>, <span class="va">mass</span><span class="op">)</span></span>
<span><span class="va">a3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">a2</span>,</span>
<span>  bmi <span class="op">=</span> <span class="va">mass</span> <span class="op">/</span> <span class="va">height</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">a4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">a3</span>, <span class="va">bmi</span> <span class="op">&gt;</span> <span class="fl">0.04</span> <span class="op">|</span> <span class="va">bmi</span> <span class="op">&lt;</span> <span class="fl">0.005</span><span class="op">)</span></span>
<span><span class="va">a4</span></span></code></pre></div>
<p>However this can lead to many problems. Giving objects appropriate
names can be difficult (e.g. object names in <code>ggplot</code>
example). When naming them chronologically (as above), it can be
difficult to remember which object is which (was the summarized object
<code>a2</code> or <code>a3</code>?…). Especially if you want to do the
same thing over and over on different data sets or subsets of
observations.</p>
<div class="section level3">
<h3 id="the-pipe-operator">The pipe operator: <code>%&gt;%</code>, <code>|&gt;</code><a class="anchor" aria-label="anchor" href="#the-pipe-operator"></a>
</h3>
<p>The pipe operator is originally from the <code>magrittr</code>
package, but is included automatically in the <code>dplyr</code>
package. More recently, newer version of R include a “native pipe”
<code>|&gt;</code> as a part of the base install. Both pipes should work
the same, and either is fine for this class. I learned using the
<code>%&gt;%</code> pipe, so most of my code will use this one.</p>
<ul>
<li><p>The pipe takes the output of one command and passes it as an
input to the next command.</p></li>
<li><p>The pipe operator allows you to write this function:
<code>f(x,y)</code> as <code>x %&gt;% f(y)</code>.</p></li>
</ul>
<p>I think that this is a bit confusing to think about, but when you see
some examples the power and ease of use becomes obvious.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a silly example</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span><span class="co"># is the same as</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5.5</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5.5</span></span></code></pre></div>
<p>You can see that both syntaxes give the same result. Now, let’s go
back our example looking at arrival and departure delays &gt; 30
minutes</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># original method, saving new object at each step</span></span>
<span><span class="va">a1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span></span>
<span><span class="va">a2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">a1</span>, <span class="va">homeworld</span>, <span class="va">height</span>, <span class="va">mass</span><span class="op">)</span></span>
<span><span class="va">a3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">a2</span>,</span>
<span>  bmi <span class="op">=</span> <span class="va">mass</span> <span class="op">/</span> <span class="va">height</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">a4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">a3</span>, <span class="va">bmi</span> <span class="op">&gt;</span> <span class="fl">0.04</span> <span class="op">|</span> <span class="va">bmi</span> <span class="op">&lt;</span> <span class="fl">0.005</span><span class="op">)</span></span>
<span><span class="va">a4</span></span>
<span></span>
<span><span class="co"># now using the %&gt;% operator</span></span>
<span><span class="va">a5</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">homeworld</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">homeworld</span>, <span class="va">height</span>, <span class="va">mass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>bmi <span class="op">=</span> <span class="va">mass</span> <span class="op">/</span> <span class="va">height</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">bmi</span> <span class="op">&gt;</span> <span class="fl">0.04</span> <span class="op">|</span> <span class="va">bmi</span> <span class="op">&lt;</span> <span class="fl">0.005</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">a4</span>, <span class="va">a5</span><span class="op">)</span></span>
<span><span class="co">#&gt; TRUE</span></span></code></pre></div>
<p>It is helpful to say “then” when you see a <code>%&gt;%</code>
operator. e.g. take object <code>starwars</code>, <em>then</em> group by
year, month and day, <em>then</em> select variables arr_delay and
dep_delay <em>then</em> summarize … etc.</p>
<p>The pipe operator in combination with <code>dplyr</code> allows you
to quickly examine your data and explore interesting results. One of my
favorite aspects of this is you can answer interesting questions almost
immediately.</p>
<p>“I wonder what the smallest mass character is?”</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">mass</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 14</span></span></span>
<span><span class="co">#&gt;   name      height  mass hair_color skin_color eye_color birth_year sex   gender</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Ratts Ty…     79    15 none       grey, blue unknown           <span style="color: #BB0000;">NA</span> male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Yoda          66    17 white      green      brown            896 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Wicket S…     88    20 brown      brown      brown              8 male  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> R2-D2         96    32 <span style="color: #BB0000;">NA</span>         white, bl… red               33 none  mascu…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   vehicles &lt;list&gt;, starships &lt;list&gt;</span></span></span></code></pre></div>
<p>If you want to also know the homeworld:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">mass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">mass</span>, <span class="va">homeworld</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 3</span></span></span>
<span><span class="co">#&gt;   name                   mass homeworld  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Ratts Tyerel             15 Aleen Minor</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Yoda                     17 <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Wicket Systri Warrick    20 Endor      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> R2-D2                    32 Naboo      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 83 more rows</span></span></span></code></pre></div>
<p>What homeworld has the largest average mass?</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mass</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">mean_mass</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 49 × 2</span></span></span>
<span><span class="co">#&gt;   homeworld mean_mass</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Nal Hutta      <span style="text-decoration: underline;">1</span>358</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Kalee           159</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Kashyyyk        124</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Trandosha       113</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 45 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="formatting-with-pipes">Formatting with pipes<a class="anchor" aria-label="anchor" href="#formatting-with-pipes"></a>
</h3>
<p>A couple of pointers.</p>
<ul>
<li><p>always enter a new line after a pipe <code>%&gt;%</code></p></li>
<li><p>if you have many arguments within a function in a pipe, enter a
new line after each comma</p></li>
<li><p>if you are making a new variable with <code>mutate</code>, or
summarizing variables with <code>summarize</code>, give them a
meaningful name</p></li>
<li><p>try and limit the number of pipes in a single call. 5-6 is OK,
but 10 or more should be avoided. If you need that many, save an
intermediate object and then pipe that.</p></li>
</ul>
<div class="section level5">
<h5 id="bad-formatting">Bad formatting<a class="anchor" aria-label="anchor" href="#bad-formatting"></a>
</h5>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># don't do these:</span></span>
<span><span class="co"># no new line after each pipe</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">carrier</span> <span class="op">==</span> <span class="st">"FL"</span> <span class="op">|</span> </span>
<span><span class="va">carrier</span> <span class="op">==</span> <span class="st">"AA"</span><span class="op">|</span> <span class="va">carrier</span> <span class="op">==</span> <span class="st">"UA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">arr_delay</span>, <span class="va">dep_delay</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>arr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">arr_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, dep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm</span>
<span><span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">arr</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">|</span> <span class="va">dep</span> <span class="op">&gt;</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="co"># no new line after each summarize argument, and meaningless variable names</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, x4 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="better-formatting">Better formatting<a class="anchor" aria-label="anchor" href="#better-formatting"></a>
</h5>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># new line after each pipe</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">arr_delay</span>, <span class="va">dep_delay</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>arr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">arr_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="co"># new line here</span></span>
<span>            dep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">arr</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">|</span> <span class="va">dep</span> <span class="op">&gt;</span> <span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># new line after each summarize argument, and variable names</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mean_delay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            min_delay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            max_delay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dep_delay</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            n_samples <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note that when you press enter when “inside” of a function, RStudio
automatically adds a tab space. This is very helpful for keeping the
code format clean and makes it much easier to read.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Justin Pomeranz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
